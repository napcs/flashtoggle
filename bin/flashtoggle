#!/usr/bin/env ruby
require 'flashtoggle'

command = ARGV[0]

puts "FlashToggle #{Flashtoggle::VERSION}"
puts "(C) 2011 Brian P. Hogan"
puts "------------------------------------------"

plugins_dir = "/Library/Internet\ Plug-Ins"
backup_dir = "/Library/InternetPluginsDisabled"


toggler = Flashtoggle::Toggler.new(plugins_dir, backup_dir)

case command
when "on"
  puts "Enabling Flash in Safari"
  toggler.enable_flash!
when "off"
  puts "Disabling Flash in Safari"
  toggler.disable_flash!
when "status"
  puts toggler.status
else
  toggler.toggle!
end

if toggler.error
  puts toggler.error 
else
  puts "Done!"
end

